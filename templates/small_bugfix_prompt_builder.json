{
  "name": "Small Bug-Fix Prompt Builder",
  "content": "## Objective\nCraft a concise final prompt for an external LLM to diagnose and fix the bug with the smallest safe change.\n\n## Context\n\n## Inputs\n- bug: {{bug}}\n- repo: {{repo}}\n- commit: {{commit}}\n\n## Assumptions\nAssumption: If repo/commit are empty, proceed with general guidance and assumptions.\nAssumption: Ask up to 2 clarifying questions if blocking.\n\n## Constraints\n- Phase 1: ONLY clarifying questions (max 2, +1 if blocking).\n- Phase 2: Output a single fenced code block (```markdown) containing the FINAL PROMPT ONLY (\u2264700 words).\n\n## Instructions\n- Task Flow: List 3\u20135 conceptual steps to resolve the bug.\n- Context Pack: Include repo, commit, and verbatim bug report.\n- Contract: Smallest change, root cause identified, tests/validation, compatibility maintained.\n- DIFF Limits: If >150 LOC or >5 files, propose scoped MVP or justify briefly.\n\n## Execution Flow\n1) Phase 1 questions\n2) Phase 2 final fenced prompt\n\n## Output Format\n- Sections in final prompt: ASSUMPTIONS, REPRO_STEPS, ROOT_CAUSE, DIFFS, TEST_PLAN, VALIDATION, (optional NEEDS_INFO).\n\n## Quality Checks\n- \u22642 questions (\u22643 if blocking).\n- DIFFS present and concrete.\n- TEST_PLAN and VALIDATION include commands.\n\n## Eval Stubs\n- pass_if(clarifying_questions_used <= 2 || (blocking && clarifying_questions_used == 3))\n- pass_if(has_diffs == true)\n- pass_if(has_validation == true)\n\n## Self-Check\nIf any Quality Check would fail, revise once before returning.",
  "description": "This template fixes bugs in small functions (\u226475 LOC) to help you quickly resolve issues in focused code units without analyzing entire modules. It identifies the specific bug, proposes minimal code change, and validates the fix maintains behavior. Output: corrected function code, explanation of fix, and test cases to prevent regression. Use for single-function bugs, unit test failures, or localized issues not requiring system-wide analysis.",
  "trigger": ":small_bug-",
  "variables": [
    {
      "name": "bug",
      "label": "Bug Report (Describe observed incorrect behavior; include clues)",
      "multiline": true
    },
    {
      "name": "repo",
      "label": "Optional repository name or link"
    },
    {
      "name": "commit",
      "label": "Optional commit hash or branch"
    }
  ]
}